# === Server Configuration ===
# The public-facing port for the entire application.
server.port=8081

# === Resilience4j Rate Limiter Configuration ===
# Allow 5 login attempts every 10 seconds.
resilience4j.ratelimiter.instances.authRateLimiter.limitForPeriod=5
resilience4j.ratelimiter.instances.authRateLimiter.limitRefreshPeriod=10s
resilience4j.ratelimiter.instances.authRateLimiter.timeoutDuration=2s

# === Resilience4j Circuit Breaker Configuration ===
# If 50% of the last 10 calls fail, open the circuit.
resilience4j.circuitbreaker.instances.authCircuitBreaker.failureRateThreshold=50
resilience4j.circuitbreaker.instances.authCircuitBreaker.slidingWindowType=COUNT_BASED
resilience4j.circuitbreaker.instances.authCircuitBreaker.slidingWindowSize=10
# Wait for 60 seconds in the OPEN state before transitioning to HALF-OPEN.
resilience4j.circuitbreaker.instances.authCircuitBreaker.waitDurationInOpenState=6s
# Allow 3 trial requests in the HALF-OPEN state.
resilience4j.circuitbreaker.instances.authCircuitBreaker.permittedNumberOfCallsInHalfOpenState=3

# === Service Discovery ===
# The URL of the downstream authentication service. This is the single source of truth.

# === Logging Configuration ===
logging.level.com.example.apigateway=DEBUG
auth.service.url=http://localhost:8082/api/internal/auth

spring.cloud.gateway.routes[1].id=user-details-service
spring.cloud.gateway.routes[1].uri=http://localhost:8083
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/dashboard/**
userDetailsService.url=http://localhost:8083

springdoc.api-docs.enabled=true
springdoc.swagger-ui.enabled=true
springdoc.swagger-ui.path=/swagger-ui.html